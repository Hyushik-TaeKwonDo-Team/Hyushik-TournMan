@model Hyushik_TournMan_Web.Classes.ViewModels.BreakingScoreListingViewModel

<div>
    <h2>Breaking</h2>
    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <th>Name</th>
                <th>Score</th>
                <th>Stations</th>
                <th>Attempts</th>
                @if (Roles.IsUserInRole(Hyushik_TournMan_Common.Constants.Constants.Roles.JUDGE_ROLE)){<th>Add Weight to Score</th>}
                @if (Roles.IsUserInRole(Hyushik_TournMan_Common.Constants.Constants.Roles.JUDGE_ROLE)){<th>Delete Entry</th>}
            </tr>
        </thead>
        <tbody>
            @foreach(var listing in Model.BreakingScoreListings.OrderByDescending(bsl=>bsl.CurrentScore)){
                <tr>
                    <td>@listing.ParticipantName</td>
                    <td>@listing.CurrentScore</td>
                    <td>@if (listing.Stations.Count > 0)
                        {
                            <span>@listing.Stations.First().Technique.Name</span>
                        }
                    </td>
                    <td>@if (listing.Stations.Count > 0)
                        {
                            @Html.TextBox("attempts", listing.Stations.First().Attempts);
                        }
                    </td>

                    @if (Roles.IsUserInRole(Hyushik_TournMan_Common.Constants.Constants.Roles.JUDGE_ROLE)){
                        <td>@Html.ActionLink("Judge", "JudgeBreakingEntry", "Scoring", new { entryId=listing.BreakingEntryId}, null)</td>
                    }
                    @if (Roles.IsUserInRole(Hyushik_TournMan_Common.Constants.Constants.Roles.JUDGE_ROLE)){
                        <td>
                            @using (Html.BeginForm("DeleteBreakingEntry", "Scoring", FormMethod.Post))
                            {
                                <input name="tournId" type="hidden" value="@Model.TournamentId"/>
                                <input name="entryId" type="hidden" value="@listing.BreakingEntryId"/>
                                <button type="submit">Delete @listing.ParticipantName's attempt</button>
                            }
                        </td>
                    }
                    <td>
                    </td>
                </tr>
                
              }
          </tbody>
    </table>
    
    @if (Roles.IsUserInRole(Hyushik_TournMan_Common.Constants.Constants.Roles.JUDGE_ROLE)) {
        <div>

            @Html.ActionLink("Add New", "CreateBreakingEntry", "Scoring", new { tournId = Model.TournamentId }, new { @class = "btn btn-primary btn-sm" })
        </div>
    }

</div>